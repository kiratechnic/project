# project

## Архитектура
взаимодействие видно на изображение в репозитории "архитектура.png"
### Хранилища данных
- пользовательская бд хронит даные об пользователях и информацию об их файлов
- хранилище файлов, проект для личного пользование делаю так чтоб на сервере можно было их относительно несложно просматривать. Возможно добавление механизма архивации

### Описание микросервисов ###

- **Manager** - локальный сервис, координирует остальных
  * Обслуживает запросы сервисов для построения связей
  * Рассылает данные об новых сервисах на служебный порт (служебный порт содержит некоторый API)

- **Proxy** - имеет внешний порт, проксирует запросы клиентов по нужным сервисам (на будущее внедрить балансировку нагрузки)

Остальные сервисы выполняют роль ресурсов могут взаимодействать между собой:
- **User service** - авторизация, регистрация, аутентификация + выдача информации о клиентских файлах, прогрузка основных страниц

- **Data Save service** - сохраняет файл клиента в хранилище, кладёт ссылку и информацию о файле в пользовательскую базу.

- **Data Get сервисы** - ищет ссылку на фаел в пользовательской DB, по найденой ссылке выдаёт файл пользователю.



# вопросы

### решённые
- поток обработки запросов клиентов(после вытаскивание из очереди, и сортировке передаётся пулу), как быть если нужно обратиться на ресурс с долгим ожиданием, **(моя идея решения)** после отправки запроса на ресурс, открывается поток который замораживается на ожидание данных, после принятия даных передаст обратно тому же пулу потоков на обработку, это все ради того чтоб использовать один пул и при этом не давать ему много задач которые тут же заморозяться **#\нет смысла чёта городить поток просто заснёт и ресы будут переданы нуждающемуся задачам, когда потребуется поток проснёться и продолжит работу, кароч просто для каждой задачи новый поток и не паримся/#**
- Нормально ли прочитать из сокета только часть http запроса до "\r\n\r\n", и если тело велико просто передать другому потоку которы уже дочитает из сокета и перешлёт сервису на обработку? **#\нормально/#**
- Пример: принятие подключения ->  чтение + проверка что конец заголовков или нет, как на долго не повиснуть на дожидание "/r/n/r/n" если отправлены непонятные байты или отправле не полный http запрос С принятие подключения -> в цикле, чтение + проверка что конец заголовков или нет, если срабатывает короткий таймаут сокета то передача потоку/пулу с более большим "timeOut" если опять сработал то отмитается если нет нужных данных. **#\сделать лимит по длительности заголовков (кол-ву байт занимаемым заголовками)/#**, мб как варик объеденить два решения, как миниму на всякий пожарный вставить короткий таймаут 
- подсказать механизмы конфигурирования сервисов **#\принятие новых конфигурация, установка их, перезагрузка чего либо/#** мб сделать несколько видов презагрузки система/программа/модуля
- надоумить как хранить файлы безопасно для системы **#\программа только читает/записывает, тонкого места в проге нет/#** от случайного открытия в операционой системе думаю можно прибегнуть к архивации
